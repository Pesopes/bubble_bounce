(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();const pe="/bubble_bounce/assets/1-msowq8PV.png",ge="/bubble_bounce/assets/10-C2b_EmXV.png",me="/bubble_bounce/assets/11-RrZkbv2B.png",we="/bubble_bounce/assets/12-Cj-w1vrm.png",ye="/bubble_bounce/assets/16-CIkSIS7u.png",_e="/bubble_bounce/assets/17-CCe0iIc4.png",ve="/bubble_bounce/assets/18-wsb_O-g9.png",Be="/bubble_bounce/assets/19-B4aX6oMj.png",Ce="/bubble_bounce/assets/2-CZcekOIb.png",Se="/bubble_bounce/assets/20-CBLc80yN.png",Me="/bubble_bounce/assets/21-B6YSg9Ux.png",Pe="/bubble_bounce/assets/22-Bey-tXPl.png",xe="/bubble_bounce/assets/23-CfGDoL72.png",De="/bubble_bounce/assets/24-BHXDI67n.png",Ie="/bubble_bounce/assets/25-D-lPi3tR.png",Ee="/bubble_bounce/assets/26-qODNZ1eh.png",Oe="/bubble_bounce/assets/27-CLKhPhSb.png",Te="/bubble_bounce/assets/28-CYOAUwfl.png",ke="/bubble_bounce/assets/29-D7x_Qp9C.png",ze="/bubble_bounce/assets/3-_feIaOhr.png",Re="/bubble_bounce/assets/30-CaNdivBa.png",Le="/bubble_bounce/assets/31-B-NKGiGE.png",qe="/bubble_bounce/assets/32-8ghHFANu.png",We="/bubble_bounce/assets/4-DD3Yexrc.png",$e="/bubble_bounce/assets/5-Btr9iXW_.png",je="/bubble_bounce/assets/6-BGMDbjSf.png",Xe="/bubble_bounce/assets/7-CMnHBFWr.png",Ae="/bubble_bounce/assets/8-kXJG1xv3.png",Ne=0,ee=.992,Ye=.96;class o{x;y;constructor(e=0,s=0){this.x=e,this.y=s}clone(){return new o(this.x,this.y)}squared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){var e=this.length();return e>0?this.div(e):new o(this.x,this.y)}div(e){return e instanceof o?new o(this.x/e.x,this.y/e.y):new o(this.x/e,this.y/e)}mult(e){return e instanceof o?new o(this.x*e.x,this.y*e.y):new o(this.x*e,this.y*e)}add(e){return e instanceof o?new o(this.x+e.x,this.y+e.y):new o(this.x+e,this.y+e)}sub(e){return e instanceof o?new o(this.x-e.x,this.y-e.y):new o(this.x-e,this.y-e)}negate(){return new o(-this.x,-this.y)}dot(e){return this.x*e.x+this.y*e.y}static lerp(e,s,i){return e.add(s.sub(e).mult(i))}}class O{pos;dim;borderRadius;constructor(e,s,i=1){this.pos=e,this.dim=s,this.borderRadius=i}clone(){return new O(this.pos.clone(),this.dim.clone(),this.borderRadius)}getCenter(){return this.pos.add(this.dim.div(2))}render(e){e.fillStyle="F0EBE3",ae(e,Math.floor(this.pos.x),Math.floor(this.pos.y),this.dim.x,this.dim.y,this.borderRadius+15)}}class I{pos;dim;onClick;text;color;borderRadius;constructor(e,s,i,n,l="red",a=55){this.pos=e,this.dim=s,this.text=i,this.onClick=n,this.color=l,this.borderRadius=a}getCenter(){return this.pos.add(this.dim.div(2))}isInside(e){return e.x>=this.pos.x&&e.x<=this.pos.x+this.dim.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.dim.y}checkClick(e){this.isInside(e)&&this.onClick(this)}render(e){e.fillStyle=this.color,ae(e,Math.floor(this.pos.x),Math.floor(this.pos.y),this.dim.x,this.dim.y,this.borderRadius),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font=`${Math.floor(this.dim.y/3)}px "verdana", sans-serif`;const s=this.getCenter();e.fillText(this.text,s.x,s.y,this.dim.x)}}class k{pos;radius;velocity;spriteIndex;rotSpeed;rot=0;player;bouncedOffWall=!1;constructor(e,s,i,n,l=0){this.pos=e,this.radius=s,this.velocity=i,this.spriteIndex=n,this.rotSpeed=0,this.player=l}clone(){const e=new k(this.pos.clone(),this.radius,this.velocity.clone(),this.spriteIndex,this.player);return e.rot=this.rot,e.rotSpeed=this.rotSpeed,e.bouncedOffWall=this.bouncedOffWall,e}mass(){return Math.PI*this.radius*this.radius/100}kineticEnergy(){return this.mass()/2*this.velocity.squared()}outOfBounds(e,s){const i=this.radius+this.radius/3;return this.pos.x-this.radius+i<=0||this.pos.x+this.radius-i>=e||this.pos.y-this.radius+i<=0||this.pos.y+this.radius-i>=s}isCollidingBubble(e){const s=this.pos.sub(e.pos),i=this.radius+e.radius;return s.length()<=i}isCollidingBlock(e){const s=e.borderRadius;let i=!1;const n=Math.max(e.pos.x+s,Math.min(this.pos.x,e.pos.x+e.dim.x-s)),l=Math.max(e.pos.y+s,Math.min(this.pos.y,e.pos.y+e.dim.y-s)),a=new o(n,l);this.pos.sub(a).length()<=this.radius&&(i=!0);const g=[new o(e.pos.x+s,e.pos.y+s),new o(e.pos.x+e.dim.x-s,e.pos.y+s),new o(e.pos.x+s,e.pos.y+e.dim.y-s),new o(e.pos.x+e.dim.x-s,e.pos.y+e.dim.y-s)];for(const u of g)if(this.pos.sub(u).length()<=this.radius+s){i=!0;break}return i}collideBlock(e){const s=e.borderRadius;let i=!1,n=new o(0,0),l=0;const a=Math.max(e.pos.x+s,Math.min(this.pos.x,e.pos.x+e.dim.x-s)),h=Math.max(e.pos.y+s,Math.min(this.pos.y,e.pos.y+e.dim.y-s)),g=new o(a,h),u=this.pos.sub(g).length();u<=this.radius&&(i=!0,a===e.pos.x+s?n=new o(-1,0):a===e.pos.x+e.dim.x-s?n=new o(1,0):h===e.pos.y+s?n=new o(0,-1):h===e.pos.y+e.dim.y-s&&(n=new o(0,1)),l=this.radius-u);const m=[new o(e.pos.x+s,e.pos.y+s),new o(e.pos.x+e.dim.x-s,e.pos.y+s),new o(e.pos.x+s,e.pos.y+e.dim.y-s),new o(e.pos.x+e.dim.x-s,e.pos.y+e.dim.y-s)];for(const v of m){const c=this.pos.sub(v).length();if(c<=this.radius+s){i=!0,n=this.pos.sub(v).normalize(),l=this.radius+s-c;break}}if(i){this.pos=this.pos.add(n.mult(l));const v=this.velocity.dot(n);return this.velocity=this.velocity.sub(n.mult(2*v)),this.velocity=this.velocity.mult(Ye),this.bouncedOffWall=!0,!0}return!1}collideBubble(e){const s=this.pos.sub(e.pos),i=this.radius+e.radius,n=s.length();if(n<=i){const l=s.normalize(),a=this.velocity.sub(e.velocity),h=l.mult(2*a.dot(l)/(this.mass()+e.mass()));this.velocity=this.velocity.sub(h.mult(e.mass())),e.velocity=e.velocity.add(h.mult(this.mass()));const g=i-n,u=l.mult(g/2);this.pos=this.pos.add(u),e.pos=e.pos.sub(u);const m=h.normalize().dot(new o(-this.velocity.y,this.velocity.x).normalize());return this.rotSpeed=m/100,e.rotSpeed=m/100,!0}return!1}update(){this.velocity.y+=Ne*this.mass(),this.velocity=this.velocity.mult(ee),this.rotSpeed*=ee,this.rot+=this.rotSpeed,this.pos=this.pos.add(this.velocity)}render(e,s){this.rot=this.rot||Math.PI*2*Math.random(),Fe(e,s,this.pos,this.radius*2,this.rot)}simpleRender(e,s="rgb(200 0 0)"){e.fillStyle=s,G(e,this.pos,this.radius)}isInside(e){return e.sub(this.pos).length()<=this.radius}}function Fe(t,e,s,i,n){t.save(),t.translate(Math.floor(s.x),Math.floor(s.y)),t.rotate(n),t.drawImage(e,-i/2,-i/2,i,i),t.restore()}function G(t,e,s){t.beginPath(),t.arc(Math.floor(e.x),Math.floor(e.y),s,0,Math.PI*2),t.fill()}function ae(t,e,s,i,n,l){t.strokeStyle="rgba(0, 0, 0, 1.0)",t.lineWidth=6,t.beginPath(),t.moveTo(e+l,s),t.lineTo(e+i-l,s),t.arcTo(e+i,s,e+i,s+l,l),t.lineTo(e+i,s+n-l),t.arcTo(e+i,s+n,e+i-l,s+n,l),t.lineTo(e+l,s+n),t.arcTo(e,s+n,e,s+n-l,l),t.lineTo(e,s+l),t.arcTo(e,s,e+l,s,l),t.stroke(),t.fill()}const Ge="/bubble_bounce/assets/abstract_dots-DTrwscDn.svg";class Ke{canvas;callbacks;evCache=[];previousEvDistance=-1;keyListeners=new Map;constructor(e,s){this.canvas=e,this.callbacks=s,window.addEventListener("resize",this.callbacks.onResize),document.addEventListener("pointerdown",this.handlePointerDown.bind(this)),document.addEventListener("pointerup",this.handlePointerUp.bind(this)),document.addEventListener("pointermove",this.handlePointerMove.bind(this)),document.addEventListener("wheel",this.handleWheel.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}onKey(e,s){return this.keyListeners.set(e,s),this}removeEvent(e){const s=this.evCache.findIndex(i=>i.pointerId===e.pointerId);this.evCache.splice(s,1)}convertEventPos(e){const s=this.canvas.getBoundingClientRect(),i=this.canvas.width/s.width,n=this.canvas.height/s.height;return new o((e.clientX-s.left)*i,(e.clientY-s.top)*n)}handlePointerMove(e){const s=this.convertEventPos(e);this.callbacks.onPointerMove(s);const i=this.evCache.findIndex(n=>n.pointerId===e.pointerId);if(this.evCache[i]=e,this.evCache.length===2){const n=new o(this.evCache[0].clientX,this.evCache[0].clientY),l=new o(this.evCache[1].clientX,this.evCache[1].clientY),a=n.sub(l).length(),h=13;this.previousEvDistance>0&&(a>this.previousEvDistance+h&&this.callbacks.onPinch("in"),a<this.previousEvDistance-h&&this.callbacks.onPinch("out")),this.previousEvDistance=a}}handlePointerDown(e){const s=this.convertEventPos(e);this.callbacks.onPointerDown(s),this.evCache.push(e)}handlePointerUp(e){const s=this.convertEventPos(e);this.callbacks.onPointerUp(s),this.removeEvent(e),this.evCache.length<2&&(this.previousEvDistance=-1)}handleWheel(e){this.callbacks.onScroll(e.deltaY)}handleKeyDown(e){const s=this.keyListeners.get(e.key);s&&(e.preventDefault(),s())}}class he{static set(e,s){try{const i=JSON.stringify(s);return localStorage.setItem(e,i),!0}catch(i){return console.error(`Error saving to localStorage for key "${e}":`,i),!1}}static get(e,s){try{const i=localStorage.getItem(e);return i===null?s===void 0?null:s:JSON.parse(i)}catch(i){return console.error(`Error reading from localStorage for key "${e}":`,i),s===void 0?null:s}}static remove(e){try{localStorage.removeItem(e)}catch(s){console.error(`Error removing item from localStorage for key "${e}":`,s)}}}const Ue=Object.assign({"./assets/balls/1.png":pe,"./assets/balls/10.png":ge,"./assets/balls/11.png":me,"./assets/balls/12.png":we,"./assets/balls/16.png":ye,"./assets/balls/17.png":_e,"./assets/balls/18.png":ve,"./assets/balls/19.png":Be,"./assets/balls/2.png":Ce,"./assets/balls/20.png":Se,"./assets/balls/21.png":Me,"./assets/balls/22.png":Pe,"./assets/balls/23.png":xe,"./assets/balls/24.png":De,"./assets/balls/25.png":Ie,"./assets/balls/26.png":Ee,"./assets/balls/27.png":Oe,"./assets/balls/28.png":Te,"./assets/balls/29.png":ke,"./assets/balls/3.png":ze,"./assets/balls/30.png":Re,"./assets/balls/31.png":Le,"./assets/balls/32.png":qe,"./assets/balls/4.png":We,"./assets/balls/5.png":$e,"./assets/balls/6.png":je,"./assets/balls/7.png":Xe,"./assets/balls/8.png":Ae}),W=Object.fromEntries(Object.entries(Ue).map(([t,e])=>{const s=t.match(/(\d+)\.png$/),i=s?s[1]:"1",n=new Image;return n.src=e,[i,n]})),r=document.getElementById("main-canvas");if(!r)throw new Error("Canvas not found");const $=r.getContext("2d");if(!$)throw new Error("2D context not found");const w=new OffscreenCanvas(r.width,r.height),f=w.getContext("2d",{alpha:!1});if(!f)throw new Error("2D context not found for offscreen canvas");let q=new o,d=[],y=[],C=[],T=[],ce=0,_=0,K=0,M=Math.round(Math.random())+1,z=!1,Z=null,R=!0,S=!0,x=!1;const P=[0,3,5,8,10,15];let D=P[2];const L=75,He=50,Y=37,A=300,j=500,ue=.6,Je=.03;let b=[],U=-1,te;const Ze=18,X=new Image;X.src=Ge;let p=null;const Qe=t=>{for(const e of y)if(t.isCollidingBlock(e))return!0;for(const e of d)if(t.isCollidingBubble(e))return!0;return!1};function de(t){return Object.values(W)[t]||W[1]}function se(){return Math.floor(Math.random()*Object.keys(W).length)}function ne(){b[0]=se();do b[1]=se();while(b[0]===b[1])}function Ve(){const t=new o(600,200),e=40,s="#92D8F8",i="#363858",n=new o(700,250);C.push(new I(new o((r.width-n.x)/2,r.height-n.y-100),n,"START",c=>{H(),_=1},"pink")),C.push(new I(new o((r.width-t.x)/2,r.height-t.y*1-400),t,S?"Blocks: Enabled":"Blocks: Disabled",c=>{S=!S,c.text=S?"Blocks: Enabled":"Blocks: Disabled",c.color=S?s:i,E()},S?s:i)),C.push(new I(new o((r.width-t.x)/2,r.height-t.y*2-400-e*1),t,x?"Require bounce: Enabled":"Require bounce: Disabled",c=>{x=!x,c.text=x?"Require bounce: Enabled":"Require bounce: Disabled",c.color=x?s:i,E()},x?s:i));const a=`rgb(${-(D/P[P.length-1])*100+200}, 233, 203)`;C.push(new I(new o((r.width-t.x)/2,r.height-t.y*3-400-e*2),t,`Small bubbles: ${D}`,c=>{const B=P.indexOf(D);D=P[(B+1)%P.length];const N=D/P[P.length-1];c.color=`rgb(${-N*100+200}, 233, 203)`,c.text=`Small bubbles: ${D}`,E()},a));const h=new o(r.width/2,300),g=new o(200,110);C.push(new I(new o((r.width-g.x)/2,h.y+L/2+g.y-e-20),g,"Randomize",c=>{ne();for(let B=0;B<T.length;B++)T[B].spriteIndex=b[B];E()},a));const u=new o(80,L*2),m="#dbedd0",v=200;b.length===0&&ne();for(let c=0;c<=1;c++){const B=c*2-1;T.push(new k(h.add(new o(B*v,0)),L,new o,b[c],c+1)),C.push(new I(h.add(new o(B*v-L-u.x,-u.y/2)),u,"<",N=>{b[c]=(b[c]-1)%Object.keys(W).length,b[c]<0&&(b[c]=Object.keys(W).length-1),T[c].spriteIndex=b[c],E()},m,20)),C.push(new I(h.add(new o(B*v+L,-u.y/2)),u,">",N=>{b[c]=(b[c]+1)%Object.keys(W).length,T[c].spriteIndex=b[c],E()},m,20))}}function et(){const t=new o(30,700),e=t.x/5,s=new o(r.width-e-t.x,(r.height-t.y)/2);if(y.push(new O(new o(e,(r.height-t.y)/2),t.mult(1))),y.push(new O(s,t.mult(1))),S){const i=Math.round(Math.random())+1;if(i===1){const n=230+170*Math.random(),l=new o(e+t.x+Math.random()*(r.width-n-2*(e+t.x)),(r.height-t.x)/2);y.push(new O(l,new o(n,t.x)))}else if(i===2){const n=170+80*Math.random(),l=100+50*Math.random(),a=new o(e+t.x+Math.random()*(r.width-n-l-2*(e+t.x)),(r.height-t.x)/2),h=new o(a.x+n+Math.random()*(r.width-n-l-a.x-e-t.x),(r.height-t.x)/2);y.push(new O(a,new o(n,t.x))),y.push(new O(h,new o(l,t.x)))}}}X.onload=t=>{Q()};function Q(){w.width=r.width,w.height=r.height,f.clearRect(0,0,w.width,w.height),f.fillStyle="#efe1e1",f.fillRect(0,0,w.width,w.height),f.save(),f.filter="drop-shadow(4px 4px 5px black) brightness(0.1) opacity(10%)",f.scale(2,2),f.drawImage(X,0,0,X.width,X.height),f.restore(),S&&_!==2&&(f.lineWidth=3,f.strokeStyle="rgba(0, 0, 0, 0.4)",f.beginPath(),f.moveTo(w.width/10,w.height/2),f.lineTo(9*w.width/10,w.height/2),f.stroke());for(const t of y)t.render(f)}function ie(t,e,s,i){const n=+i*2-1,l=new k(t,L,new o,e,s);d.push(l);for(let u=0;u<=5;u++)d.push(new k(new o(u/5*r.width,t.y+A/2*n),He,new o,e,s));const a=150;let h=0,g=0;for(;h<D&&g<=a;){const u=new k(new o(Y+Math.random()*(r.width-Y*2),t.y-A/2*n*Math.random()),Y,new o,e,s);Qe(u)||(h++,d.push(u)),g++}g>=a&&console.error("couldn't spawn all small bubbles :(")}function be(){fe(),dt(ut()),et(),Ve();const t=new o(r.width/2,A),e=new o(r.width/2,r.height-A);ie(t,b[0],1,!0),ie(e,b[1],2,!1)}function tt(){const t={onPointerMove:e=>{q=e},onPointerDown:e=>{if(q=e,_===0){for(const s of C)s.checkClick(e);return}if(_===2){H();return}_===1&&!z&&(p=ct(q),p&&p.player!==M&&(p=null))},onPointerUp(e){if(p){const s=p.pos.sub(q).mult(U);if(s.length()-p.radius<=20){p=null;return}R=!0,Z=V(),p.velocity=s.normalize().mult(Math.min(s.length(),j)/j*Ze),p=null,nt(),z=!0}},onScroll(e){e<0?le():re()},onPinch:e=>{e==="in"?le():e==="out"&&re()},onResize:()=>{fe()}};te=new Ke(r,t),te.onKey("Escape",()=>{(_===1||_===2)&&H()})}function H(){_=0,d=[],y=[],C=[],T=[],M=Math.round(Math.random())+1,be(),Q()}function V(){return{bubbles:d.map(t=>t.clone()),blocks:y.map(t=>t.clone()),currentPlayer:M,firstBounce:R}}function st(t){d=t.bubbles,y=t.blocks,M=t.currentPlayer,R=t.firstBounce}function fe(){r.height=1600,r.width=950}function oe(t){_=2,y=[],Q(),K=t}function nt(){M===1?M=2:M=1}const J=()=>{let t=0;for(const e of d)e.velocity.length()>t&&(t=e.velocity.length());return t},it=()=>{let t=!1,e=!1;for(const s of d)if(s.player===1?t=!0:e=!0,t&&e)break;return t&&e?0:t?2:1};function F(){d.forEach((t,e)=>{t.update();for(const s of d.slice(e+1))t.collideBubble(s)&&(R&&x&&t.player===M!=(s.player===M)&&st(Z??V()),R=!1);for(const s of y)t.collideBlock(s)&&(R=!1)})}function ot(t){if(ce=t,d=d.filter(e=>!e.outOfBounds(r.width,r.height)),F(),J()<ue&&z)for(let e=0;e<2;e++)F();if(J()<Je&&z){for(let e=0;e<1e3;e++)F();if(R=!0,z=!1,Z=V(),d.length===0)oe(0);else{const e=it();e!==0&&oe(e)}}}function lt(t){t.clearRect(0,0,r.width,r.height),t.drawImage(w,0,0);{t.lineWidth=2;for(let s=1;s<=2;s++){const i=d.filter(n=>n.player===s);t.beginPath(),t.strokeStyle=`rgba(0, 0, 0, ${.2})`,i.forEach((n,l)=>{for(const a of i.slice(l+1))n.pos.sub(a.pos).length()<=300&&(t.moveTo(Math.floor(n.pos.x),Math.floor(n.pos.y)),t.lineTo(Math.floor(a.pos.x),Math.floor(a.pos.y)))}),t.stroke()}}for(const e of d)e.player===M&&!z&&(t.fillStyle="rgba(0,0,0,0.3)",G(t,e.pos,e.radius+e.radius*.15*(Math.sin(ce/250)+1))),e.render(t,de(e.spriteIndex));if(p){const e=p.pos,s=new o(r.width,r.height).length(),i=e.add(e.sub(q).mult(U).normalize().mult(s)),n=ht(e,i,p.radius,p,200);n&&(t.fillStyle=p.player===2?"rgba(158, 152, 250, 0.3)":"rgba(250, 163, 152, 0.3)",G(t,n,p.radius));let l=e.sub(q);t.strokeStyle="rgb(0 0 0)",l.length()>j&&(l=l.normalize().mult(j),t.strokeStyle="rgb(120 0 0)");const a=l.length()/j;let h=e.add(l.mult(U));t.beginPath(),t.setLineDash([5+5*a,17*a]),t.lineWidth=6,t.moveTo(e.x,e.y),t.lineTo(h.x,h.y),t.stroke(),t.setLineDash([])}if(J()<ue&&z){t.save(),t.fillStyle="rgba(43, 38, 38, 0.9)";const e=20,s=r.width/2+e/2,i=120,n=80;t.beginPath(),t.moveTo(s-e-n,i-n/2),t.lineTo(s-e,i),t.lineTo(s-e-n,i+n/2),t.closePath(),t.fill(),t.beginPath(),t.moveTo(s+e,i-n/2),t.lineTo(s+e+n,i),t.lineTo(s+e,i+n/2),t.closePath(),t.fill(),t.restore()}}function rt(t){t.clearRect(0,0,r.width,r.height),t.drawImage(w,0,0);let e="";K===0?e="Draw":K===1?e="Player 1 won!":e="Player 2 won!",t.fillStyle="black",t.textAlign="center",t.font='bold 120px "verdana", sans-serif',t.fillText(e,r.width/2,r.height/2),t.font='60px "verdana", sans-serif',t.fillText("Click to continue...",r.width/2,r.height*2/3)}function at(t){t.clearRect(0,0,r.width,r.height),t.drawImage(w,0,0);for(const e of C)e.render(t);for(const e of T)e.render(t,de(e.spriteIndex));t.fillStyle="black",t.textAlign="center",t.font='bold 100px "Helvetica", sans-serif',t.fillText("Bubble Bounce",r.width/2,r.height/10)}function ht(t,e,s,i,n=100){const l=e.sub(t),a=new k(new o,s,new o,1);for(let h=1;h<=n;h++){const g=h/n,u=t.add(l.mult(g));a.pos=u;for(let m=0;m<d.length;m++){const v=d[m];if(v!==i&&a.isCollidingBubble(v))return a.pos.mult(1)}for(const m of y)if(a.isCollidingBlock(m))return a.pos.mult(1)}return null}function ct(t){for(let e=0;e<d.length;e++){const s=d[e];if(s.isInside(t))return s}return null}function ut(){const t={smallBallCount:P[2],enableMiddleBlocks:!0,requiredBounce:!1},e=he.get("bubble_bounce_settings");return e||t}function dt(t){D=t.smallBallCount,S=t.enableMiddleBlocks,x=t.requiredBounce,E()}function E(){he.set("bubble_bounce_settings",{chosenSprites:b,smallBallCount:D,enableMiddleBlocks:S,requiredBounce:x})}const le=()=>{r.style.transform="scale(1)"},re=()=>{r.style.transform="scale(0.8)"};be();tt();(()=>{function t(e){if(window.requestAnimationFrame(t),!$)throw new Error("Main loop: 2D context not found");_===0?at($):_===1?(ot(e),lt($)):_===2&&rt($)}t(0)})();
