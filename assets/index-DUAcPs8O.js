(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();const be="/bubble_bounce/assets/1-msowq8PV.png",fe="/bubble_bounce/assets/10-C2b_EmXV.png",pe="/bubble_bounce/assets/11-RrZkbv2B.png",ge="/bubble_bounce/assets/12-Cj-w1vrm.png",me="/bubble_bounce/assets/16-CIkSIS7u.png",we="/bubble_bounce/assets/17-CCe0iIc4.png",_e="/bubble_bounce/assets/18-wsb_O-g9.png",ye="/bubble_bounce/assets/19-B4aX6oMj.png",ve="/bubble_bounce/assets/2-CZcekOIb.png",Be="/bubble_bounce/assets/20-CBLc80yN.png",Ce="/bubble_bounce/assets/21-B6YSg9Ux.png",xe="/bubble_bounce/assets/22-Bey-tXPl.png",Se="/bubble_bounce/assets/23-CfGDoL72.png",Me="/bubble_bounce/assets/24-BHXDI67n.png",Pe="/bubble_bounce/assets/25-D-lPi3tR.png",De="/bubble_bounce/assets/26-qODNZ1eh.png",Ie="/bubble_bounce/assets/27-CLKhPhSb.png",Ee="/bubble_bounce/assets/28-CYOAUwfl.png",Oe="/bubble_bounce/assets/29-D7x_Qp9C.png",ke="/bubble_bounce/assets/3-_feIaOhr.png",ze="/bubble_bounce/assets/30-CaNdivBa.png",Re="/bubble_bounce/assets/31-B-NKGiGE.png",Te="/bubble_bounce/assets/32-8ghHFANu.png",Le="/bubble_bounce/assets/4-DD3Yexrc.png",qe="/bubble_bounce/assets/5-Btr9iXW_.png",We="/bubble_bounce/assets/6-BGMDbjSf.png",$e="/bubble_bounce/assets/7-CMnHBFWr.png",je="/bubble_bounce/assets/8-kXJG1xv3.png",Ae=0,Q=.992,Ne=.96;class o{x;y;constructor(e=0,s=0){this.x=e,this.y=s}clone(){return new o(this.x,this.y)}squared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){var e=this.length();return e>0?this.div(e):new o(this.x,this.y)}div(e){return e instanceof o?new o(this.x/e.x,this.y/e.y):new o(this.x/e,this.y/e)}mult(e){return e instanceof o?new o(this.x*e.x,this.y*e.y):new o(this.x*e,this.y*e)}add(e){return e instanceof o?new o(this.x+e.x,this.y+e.y):new o(this.x+e,this.y+e)}sub(e){return e instanceof o?new o(this.x-e.x,this.y-e.y):new o(this.x-e,this.y-e)}negate(){return new o(-this.x,-this.y)}dot(e){return this.x*e.x+this.y*e.y}static lerp(e,s,i){return e.add(s.sub(e).mult(i))}}class O{pos;dim;borderRadius;constructor(e,s,i=1){this.pos=e,this.dim=s,this.borderRadius=i}clone(){return new O(this.pos.clone(),this.dim.clone(),this.borderRadius)}getCenter(){return this.pos.add(this.dim.div(2))}render(e){e.fillStyle="F0EBE3",re(e,Math.floor(this.pos.x),Math.floor(this.pos.y),this.dim.x,this.dim.y,this.borderRadius+15)}}class I{pos;dim;onClick;text;color;borderRadius;constructor(e,s,i,n,l="red",a=55){this.pos=e,this.dim=s,this.text=i,this.onClick=n,this.color=l,this.borderRadius=a}getCenter(){return this.pos.add(this.dim.div(2))}isInside(e){return e.x>=this.pos.x&&e.x<=this.pos.x+this.dim.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.dim.y}checkClick(e){this.isInside(e)&&this.onClick(this)}render(e){e.fillStyle=this.color,re(e,Math.floor(this.pos.x),Math.floor(this.pos.y),this.dim.x,this.dim.y,this.borderRadius),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font=`${Math.floor(this.dim.y/3)}px "verdana", sans-serif`;const s=this.getCenter();e.fillText(this.text,s.x,s.y,this.dim.x)}}class z{pos;radius;velocity;spriteIndex;rotSpeed;rot=0;player;bouncedOffWall=!1;constructor(e,s,i,n,l=0){this.pos=e,this.radius=s,this.velocity=i,this.spriteIndex=n,this.rotSpeed=0,this.player=l}clone(){const e=new z(this.pos.clone(),this.radius,this.velocity.clone(),this.spriteIndex,this.player);return e.rot=this.rot,e.rotSpeed=this.rotSpeed,e.bouncedOffWall=this.bouncedOffWall,e}mass(){return Math.PI*this.radius*this.radius/100}kineticEnergy(){return this.mass()/2*this.velocity.squared()}outOfBounds(e,s){const i=this.radius+this.radius/3;return this.pos.x-this.radius+i<=0||this.pos.x+this.radius-i>=e||this.pos.y-this.radius+i<=0||this.pos.y+this.radius-i>=s}isCollidingBubble(e){const s=this.pos.sub(e.pos),i=this.radius+e.radius;return s.length()<=i}isCollidingBlock(e){const s=e.borderRadius;let i=!1;const n=Math.max(e.pos.x+s,Math.min(this.pos.x,e.pos.x+e.dim.x-s)),l=Math.max(e.pos.y+s,Math.min(this.pos.y,e.pos.y+e.dim.y-s)),a=new o(n,l);this.pos.sub(a).length()<=this.radius&&(i=!0);const g=[new o(e.pos.x+s,e.pos.y+s),new o(e.pos.x+e.dim.x-s,e.pos.y+s),new o(e.pos.x+s,e.pos.y+e.dim.y-s),new o(e.pos.x+e.dim.x-s,e.pos.y+e.dim.y-s)];for(const u of g)if(this.pos.sub(u).length()<=this.radius+s){i=!0;break}return i}collideBlock(e){const s=e.borderRadius;let i=!1,n=new o(0,0),l=0;const a=Math.max(e.pos.x+s,Math.min(this.pos.x,e.pos.x+e.dim.x-s)),c=Math.max(e.pos.y+s,Math.min(this.pos.y,e.pos.y+e.dim.y-s)),g=new o(a,c),u=this.pos.sub(g).length();u<=this.radius&&(i=!0,a===e.pos.x+s?n=new o(-1,0):a===e.pos.x+e.dim.x-s?n=new o(1,0):c===e.pos.y+s?n=new o(0,-1):c===e.pos.y+e.dim.y-s&&(n=new o(0,1)),l=this.radius-u);const m=[new o(e.pos.x+s,e.pos.y+s),new o(e.pos.x+e.dim.x-s,e.pos.y+s),new o(e.pos.x+s,e.pos.y+e.dim.y-s),new o(e.pos.x+e.dim.x-s,e.pos.y+e.dim.y-s)];for(const v of m){const h=this.pos.sub(v).length();if(h<=this.radius+s){i=!0,n=this.pos.sub(v).normalize(),l=this.radius+s-h;break}}if(i){this.pos=this.pos.add(n.mult(l));const v=this.velocity.dot(n);return this.velocity=this.velocity.sub(n.mult(2*v)),this.velocity=this.velocity.mult(Ne),this.bouncedOffWall=!0,!0}return!1}collideBubble(e){const s=this.pos.sub(e.pos),i=this.radius+e.radius,n=s.length();if(n<=i){const l=s.normalize(),a=this.velocity.sub(e.velocity),c=l.mult(2*a.dot(l)/(this.mass()+e.mass()));this.velocity=this.velocity.sub(c.mult(e.mass())),e.velocity=e.velocity.add(c.mult(this.mass()));const g=i-n,u=l.mult(g/2);this.pos=this.pos.add(u),e.pos=e.pos.sub(u);const m=c.normalize().dot(new o(-this.velocity.y,this.velocity.x).normalize());return this.rotSpeed=m/100,e.rotSpeed=m/100,!0}return!1}update(){this.velocity.y+=Ae*this.mass(),this.velocity=this.velocity.mult(Q),this.rotSpeed*=Q,this.rot+=this.rotSpeed,this.pos=this.pos.add(this.velocity)}render(e,s){this.rot=this.rot||Math.PI*2*Math.random(),Xe(e,s,this.pos,this.radius*2,this.rot)}simpleRender(e,s="rgb(200 0 0)"){e.fillStyle=s,Y(e,this.pos,this.radius)}isInside(e){return e.sub(this.pos).length()<=this.radius}}function Xe(t,e,s,i,n){t.save(),t.translate(Math.floor(s.x),Math.floor(s.y)),t.rotate(n),t.drawImage(e,-i/2,-i/2,i,i),t.restore()}function Y(t,e,s){t.beginPath(),t.arc(Math.floor(e.x),Math.floor(e.y),s,0,Math.PI*2),t.fill()}function re(t,e,s,i,n,l){t.strokeStyle="rgba(0, 0, 0, 1.0)",t.lineWidth=6,t.beginPath(),t.moveTo(e+l,s),t.lineTo(e+i-l,s),t.arcTo(e+i,s,e+i,s+l,l),t.lineTo(e+i,s+n-l),t.arcTo(e+i,s+n,e+i-l,s+n,l),t.lineTo(e+l,s+n),t.arcTo(e,s+n,e,s+n-l,l),t.lineTo(e,s+l),t.arcTo(e,s,e+l,s,l),t.stroke(),t.fill()}const Fe="/bubble_bounce/assets/abstract_dots-DTrwscDn.svg";class Ye{canvas;callbacks;evCache=[];previousEvDistance=-1;keyListeners=new Map;constructor(e,s){this.canvas=e,this.callbacks=s,window.addEventListener("resize",this.callbacks.onResize),document.addEventListener("pointerdown",this.handlePointerDown.bind(this)),document.addEventListener("pointerup",this.handlePointerUp.bind(this)),document.addEventListener("pointermove",this.handlePointerMove.bind(this)),document.addEventListener("wheel",this.handleWheel.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}onKey(e,s){return this.keyListeners.set(e,s),this}removeEvent(e){const s=this.evCache.findIndex(i=>i.pointerId===e.pointerId);this.evCache.splice(s,1)}convertEventPos(e){const s=this.canvas.getBoundingClientRect(),i=this.canvas.width/s.width,n=this.canvas.height/s.height;return new o((e.clientX-s.left)*i,(e.clientY-s.top)*n)}handlePointerMove(e){const s=this.convertEventPos(e);this.callbacks.onPointerMove(s);const i=this.evCache.findIndex(n=>n.pointerId===e.pointerId);if(this.evCache[i]=e,this.evCache.length===2){const n=new o(this.evCache[0].clientX,this.evCache[0].clientY),l=new o(this.evCache[1].clientX,this.evCache[1].clientY),a=n.sub(l).length(),c=13;this.previousEvDistance>0&&(a>this.previousEvDistance+c&&this.callbacks.onPinch("in"),a<this.previousEvDistance-c&&this.callbacks.onPinch("out")),this.previousEvDistance=a}}handlePointerDown(e){const s=this.convertEventPos(e);this.callbacks.onPointerDown(s),this.evCache.push(e)}handlePointerUp(e){const s=this.convertEventPos(e);this.callbacks.onPointerUp(s),this.removeEvent(e),this.evCache.length<2&&(this.previousEvDistance=-1)}handleWheel(e){this.callbacks.onScroll(e.deltaY)}handleKeyDown(e){const s=this.keyListeners.get(e.key);s&&(e.preventDefault(),s())}}class ae{static set(e,s){try{const i=JSON.stringify(s);return localStorage.setItem(e,i),!0}catch(i){return console.error(`Error saving to localStorage for key "${e}":`,i),!1}}static get(e,s){try{const i=localStorage.getItem(e);return i===null?s===void 0?null:s:JSON.parse(i)}catch(i){return console.error(`Error reading from localStorage for key "${e}":`,i),s===void 0?null:s}}static remove(e){try{localStorage.removeItem(e)}catch(s){console.error(`Error removing item from localStorage for key "${e}":`,s)}}}const Ge=Object.assign({"./assets/balls/1.png":be,"./assets/balls/10.png":fe,"./assets/balls/11.png":pe,"./assets/balls/12.png":ge,"./assets/balls/16.png":me,"./assets/balls/17.png":we,"./assets/balls/18.png":_e,"./assets/balls/19.png":ye,"./assets/balls/2.png":ve,"./assets/balls/20.png":Be,"./assets/balls/21.png":Ce,"./assets/balls/22.png":xe,"./assets/balls/23.png":Se,"./assets/balls/24.png":Me,"./assets/balls/25.png":Pe,"./assets/balls/26.png":De,"./assets/balls/27.png":Ie,"./assets/balls/28.png":Ee,"./assets/balls/29.png":Oe,"./assets/balls/3.png":ke,"./assets/balls/30.png":ze,"./assets/balls/31.png":Re,"./assets/balls/32.png":Te,"./assets/balls/4.png":Le,"./assets/balls/5.png":qe,"./assets/balls/6.png":We,"./assets/balls/7.png":$e,"./assets/balls/8.png":je}),q=Object.fromEntries(Object.entries(Ge).map(([t,e])=>{const s=t.match(/(\d+)\.png$/),i=s?s[1]:"1",n=new Image;return n.src=e,[i,n]})),r=document.getElementById("main-canvas");if(!r)throw new Error("Canvas not found");const W=r.getContext("2d");if(!W)throw new Error("2D context not found");const w=new OffscreenCanvas(r.width,r.height),f=w.getContext("2d",{alpha:!1});if(!f)throw new Error("2D context not found for offscreen canvas");let L=new o,d=[],_=[],C=[],k=[],ce=0,y=0,G=0,S=Math.round(Math.random())+1,A=!1,H=null,R=!0,x=!0,P=!1;const M=[0,3,5,8,10,15];let D=M[2];const T=75,Ke=50,F=37,N=300,$=500;let b=[],K=-1,V;const Ue=18,j=new Image;j.src=Fe;let p=null;const He=t=>{for(const e of _)if(t.isCollidingBlock(e))return!0;for(const e of d)if(t.isCollidingBubble(e))return!0;return!1};function he(t){return Object.values(q)[t]||q[1]}function ee(){return Math.floor(Math.random()*Object.keys(q).length)}function te(){b[0]=ee();do b[1]=ee();while(b[0]===b[1])}function Je(){const t=new o(600,200),e=40,s="#92D8F8",i="#363858",n=new o(700,250);C.push(new I(new o((r.width-n.x)/2,r.height-n.y-100),n,"START",h=>{U(),y=1},"pink")),C.push(new I(new o((r.width-t.x)/2,r.height-t.y*1-400),t,x?"Blocks: Enabled":"Blocks: Disabled",h=>{x=!x,h.text=x?"Blocks: Enabled":"Blocks: Disabled",h.color=x?s:i,E()},x?s:i)),C.push(new I(new o((r.width-t.x)/2,r.height-t.y*2-400-e*1),t,P?"Require bounce: Enabled":"Require bounce: Disabled",h=>{P=!P,h.text=P?"Require bounce: Enabled":"Require bounce: Disabled",h.color=P?s:i,E()},P?s:i));const a=`rgb(${-(D/M[M.length-1])*100+200}, 233, 203)`;C.push(new I(new o((r.width-t.x)/2,r.height-t.y*3-400-e*2),t,`Small bubbles: ${D}`,h=>{const B=M.indexOf(D);D=M[(B+1)%M.length];const X=D/M[M.length-1];h.color=`rgb(${-X*100+200}, 233, 203)`,h.text=`Small bubbles: ${D}`,E()},a));const c=new o(r.width/2,300),g=new o(200,110);C.push(new I(new o((r.width-g.x)/2,c.y+T/2+g.y-e-20),g,"Randomize",h=>{te();for(let B=0;B<k.length;B++)k[B].spriteIndex=b[B];E()},a));const u=new o(80,T*2),m="#dbedd0",v=200;b.length===0&&te();for(let h=0;h<=1;h++){const B=h*2-1;k.push(new z(c.add(new o(B*v,0)),T,new o,b[h],h+1)),C.push(new I(c.add(new o(B*v-T-u.x,-u.y/2)),u,"<",X=>{b[h]=(b[h]-1)%Object.keys(q).length,b[h]<0&&(b[h]=Object.keys(q).length-1),k[h].spriteIndex=b[h],E()},m,20)),C.push(new I(c.add(new o(B*v+T,-u.y/2)),u,">",X=>{b[h]=(b[h]+1)%Object.keys(q).length,k[h].spriteIndex=b[h],E()},m,20))}}function Ze(){const t=new o(30,700),e=t.x/5,s=new o(r.width-e-t.x,(r.height-t.y)/2);if(_.push(new O(new o(e,(r.height-t.y)/2),t.mult(1))),_.push(new O(s,t.mult(1))),x){const i=Math.round(Math.random())+1;if(i===1){const n=230+170*Math.random(),l=new o(e+t.x+Math.random()*(r.width-n-2*(e+t.x)),(r.height-t.x)/2);_.push(new O(l,new o(n,t.x)))}else if(i===2){const n=170+80*Math.random(),l=100+50*Math.random(),a=new o(e+t.x+Math.random()*(r.width-n-l-2*(e+t.x)),(r.height-t.x)/2),c=new o(a.x+n+Math.random()*(r.width-n-l-a.x-e-t.x),(r.height-t.x)/2);_.push(new O(a,new o(n,t.x))),_.push(new O(c,new o(l,t.x)))}}}j.onload=t=>{J()};function J(){w.width=r.width,w.height=r.height,f.clearRect(0,0,w.width,w.height),f.fillStyle="#efe1e1",f.fillRect(0,0,w.width,w.height),f.save(),f.filter="drop-shadow(4px 4px 5px black) brightness(0.1) opacity(10%)",f.scale(2,2),f.drawImage(j,0,0,j.width,j.height),f.restore(),x&&y!==2&&(f.lineWidth=3,f.strokeStyle="rgba(0, 0, 0, 0.4)",f.beginPath(),f.moveTo(w.width/10,w.height/2),f.lineTo(9*w.width/10,w.height/2),f.stroke());for(const t of _)t.render(f)}function se(t,e,s,i){const n=+i*2-1,l=new z(t,T,new o,e,s);d.push(l);for(let u=0;u<=5;u++)d.push(new z(new o(u/5*r.width,t.y+N/2*n),Ke,new o,e,s));const a=150;let c=0,g=0;for(;c<D&&g<=a;){const u=new z(new o(F+Math.random()*(r.width-F*2),t.y-N/2*n*Math.random()),F,new o,e,s);He(u)||(c++,d.push(u)),g++}g>=a&&console.error("couldn't spawn all small bubbles :(")}function ue(){de(),ht(ct()),Ze(),Je();const t=new o(r.width/2,N),e=new o(r.width/2,r.height-N);se(t,b[0],1,!0),se(e,b[1],2,!1)}function Qe(){const t={onPointerMove:e=>{L=e},onPointerDown:e=>{if(L=e,y===0){for(const s of C)s.checkClick(e);return}if(y===2){U();return}y===1&&!A&&(p=at(L),p&&p.player!==S&&(p=null))},onPointerUp(e){if(p){const s=p.pos.sub(L).mult(K);if(s.length()-p.radius<=20){p=null;return}R=!0,H=Z(),p.velocity=s.normalize().mult(Math.min(s.length(),$)/$*Ue),p=null,et(),A=!0}},onScroll(e){e<0?oe():le()},onPinch:e=>{e==="in"?oe():e==="out"&&le()},onResize:()=>{de()}};V=new Ye(r,t),V.onKey("Escape",()=>{(y===1||y===2)&&U()})}function U(){y=0,d=[],_=[],C=[],k=[],S=Math.round(Math.random())+1,ue(),J()}function Z(){return{bubbles:d.map(t=>t.clone()),blocks:_.map(t=>t.clone()),currentPlayer:S,firstBounce:R}}function Ve(t){d=t.bubbles,_=t.blocks,S=t.currentPlayer,R=t.firstBounce}function de(){r.height=1600,r.width=950}function ne(t){y=2,_=[],J(),G=t}function et(){S===1?S=2:S=1}const tt=()=>{for(const t of d)if(t.velocity.length()>.3)return!1;return!0},st=()=>{let t=!1,e=!1;for(const s of d)if(s.player===1?t=!0:e=!0,t&&e)break;return t&&e?0:t?2:1};function ie(){d.forEach((t,e)=>{t.update();for(const s of d.slice(e+1))t.collideBubble(s)&&(R&&P&&t.player===S!=(s.player===S)&&Ve(H??Z()),R=!1);for(const s of _)t.collideBlock(s)&&(R=!1)})}function nt(t){if(ce=t,d=d.filter(e=>!e.outOfBounds(r.width,r.height)),ie(),tt()&&A){for(let e=0;e<1e3;e++)ie();if(R=!0,A=!1,H=Z(),d.length===0)ne(0);else{const e=st();e!==0&&ne(e)}}}function it(t){t.clearRect(0,0,r.width,r.height),t.drawImage(w,0,0);{t.lineWidth=2;for(let s=1;s<=2;s++){const i=d.filter(n=>n.player===s);t.beginPath(),t.strokeStyle=`rgba(0, 0, 0, ${.2})`,i.forEach((n,l)=>{for(const a of i.slice(l+1))n.pos.sub(a.pos).length()<=300&&(t.moveTo(Math.floor(n.pos.x),Math.floor(n.pos.y)),t.lineTo(Math.floor(a.pos.x),Math.floor(a.pos.y)))}),t.stroke()}}for(const e of d)e.player===S&&!A&&(t.fillStyle="rgba(0,0,0,0.3)",Y(t,e.pos,e.radius+e.radius*.15*(Math.sin(ce/250)+1))),e.render(t,he(e.spriteIndex));if(p){const e=p.pos,s=new o(r.width,r.height).length(),i=e.add(e.sub(L).mult(K).normalize().mult(s)),n=rt(e,i,p.radius,p,200);n&&(t.fillStyle=p.player===2?"rgba(158, 152, 250, 0.3)":"rgba(250, 163, 152, 0.3)",Y(t,n,p.radius));let l=e.sub(L);t.strokeStyle="rgb(0 0 0)",l.length()>$&&(l=l.normalize().mult($),t.strokeStyle="rgb(120 0 0)");const a=l.length()/$;let c=e.add(l.mult(K));t.beginPath(),t.setLineDash([5+5*a,17*a]),t.lineWidth=6,t.moveTo(e.x,e.y),t.lineTo(c.x,c.y),t.stroke(),t.setLineDash([])}}function ot(t){t.clearRect(0,0,r.width,r.height),t.drawImage(w,0,0);let e="";G===0?e="Draw":G===1?e="Player 1 won!":e="Player 2 won!",t.fillStyle="black",t.textAlign="center",t.font='bold 120px "verdana", sans-serif',t.fillText(e,r.width/2,r.height/2),t.font='60px "verdana", sans-serif',t.fillText("Click to continue...",r.width/2,r.height*2/3)}function lt(t){t.clearRect(0,0,r.width,r.height),t.drawImage(w,0,0);for(const e of C)e.render(t);for(const e of k)e.render(t,he(e.spriteIndex));t.fillStyle="black",t.textAlign="center",t.font='bold 100px "Helvetica", sans-serif',t.fillText("Bubble Bounce",r.width/2,r.height/10)}function rt(t,e,s,i,n=100){const l=e.sub(t),a=new z(new o,s,new o,1);for(let c=1;c<=n;c++){const g=c/n,u=t.add(l.mult(g));a.pos=u;for(let m=0;m<d.length;m++){const v=d[m];if(v!==i&&a.isCollidingBubble(v))return a.pos.mult(1)}for(const m of _)if(a.isCollidingBlock(m))return a.pos.mult(1)}return null}function at(t){for(let e=0;e<d.length;e++){const s=d[e];if(s.isInside(t))return s}return null}function ct(){const t={smallBallCount:M[2],enableMiddleBlocks:!0,requiredBounce:!1},e=ae.get("bubble_bounce_settings");return e||t}function ht(t){D=t.smallBallCount,x=t.enableMiddleBlocks,P=t.requiredBounce,E()}function E(){ae.set("bubble_bounce_settings",{chosenSprites:b,smallBallCount:D,enableMiddleBlocks:x,requiredBounce:P})}const oe=()=>{r.style.transform="scale(1)"},le=()=>{r.style.transform="scale(0.8)"};ue();Qe();(()=>{function t(e){if(window.requestAnimationFrame(t),!W)throw new Error("Main loop: 2D context not found");y===0?lt(W):y===1?(nt(e),it(W)):y===2&&ot(W)}t(0)})();
